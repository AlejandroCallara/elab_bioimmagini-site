{"version":3,"kind":"Article","sha256":"c2354cd89de2e3455aa2db4f466df45729fc0e64be3b6f2dee96a54a4fd398ba","slug":"z-1-1-esercitazione","location":"/capitolo1/z_1_1_esercitazione.md","dependencies":[],"frontmatter":{"title":"Esercitazione 1: stima dei parametri di qualità di un’immagine biomedica","content_includes_title":false,"numbering":{"title":{"offset":1}},"thumbnail":"/elab_bioimmagini-site/build/image-30-68250ded2324d98937077b7f8b06d89a.png","exports":[{"format":"md","filename":"z_1_1_esercitazione.md","url":"/elab_bioimmagini-site/build/z_1_1_esercitazione-44b0193bac509ad46e446498f4ce3465.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Teoria","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"uNZRdpV4qa"}],"identifier":"teoria","label":"Teoria","html_id":"teoria","implicit":true,"key":"Ho80nHDBwh"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"La misura del rumore associato ad una immagine biomedica è un punto fondamentale in molte applicazioni, come l’analisi della qualità di immagine e la realizzazione di filtri adattivi. Per la misura del rumore sono stati sviluppati vari approcci, che possono essere divisi in due categorie:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"NtKv1tESyD"}],"key":"G9votWRE23"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Basati sul tracciamento di ROI","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"UsAa3rLaoX"}],"key":"P8sSfEqMsN"}],"key":"OXCgtESOF7"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Basati sull’analisi dell’istogramma","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"p19IKoaVKh"}],"key":"fgFBhi3YAe"}],"key":"lPS2SZGxvb"}],"key":"y2IDf6xCnE"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Nei metodi basati su ROI, una o più ROI vengono tracciate sui tessuti di interesse, definendo delle zone omogenee ed evitando che la misura sia influenzata dal PVE o dalla presenza di attenuazione. Il rumore sul tessuto viene stimato come la deviazione standard (SD) del segnale sulla ROI. Le ROI possono essere definite manualmente o automaticamente attraverso algoritmi di segmentazione che saranno illustrati nel seguito. La definizione automatica è molto semplificata nel caso di fantocci per la misura della qualità dell’immagine di cui è nota la forma e posizione nello scanner.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"ccmvJmIqKo"}],"key":"MtPoUwIOxN"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Nella misura attraverso ROI il punto fondamentale è il compromesso tra grandezza della ROI e necessità di posizionare la ROI in una regione omogenea.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"Sg7YASE4Ge"}],"key":"cMMrvySo8b"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"In Figura 1.30 osserviamo le misure di Media e SD del segnale su ROI di dimensioni crescenti (100 realizzazioni di rumore, ROI quadrate). Si osserva chiaramente come la misura della SD sia più critica rispetto a quella del valor medio e come per la SD siano necessarie ROI con qualche decina di pixel per avere una misura affidabile. Da queste considerazioni derivano gli approcci a sottrazione di immagini e misura del rumore sul fondo utilizzati nella pratica clinica con lo scopo di aumentare il numero di pixel disponibili per la stima della SD.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"ZITT4odlPq"}],"key":"XtYozJTjxn"},{"type":"image","style":{"width":"100%"},"url":"/elab_bioimmagini-site/build/image-30-68250ded2324d98937077b7f8b06d89a.png","alt":"M_SD_ROI","key":"ItkjsYwEMn","urlSource":"./images/image-30.png"},{"type":"paragraph","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Figura 1.30. Stima di Media e SD su ROI al variare della dimensione della ROI.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"SC45qbYsR6"}],"key":"e8I4FT4pYu"}],"key":"sp50oVbBS6"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"Consideriamo ad esempio il caso in Figura 1.31 di immagini cardiache in LGE (Late Gadolinium Enhancement). Lo scopo di questo tipo di immagini con contrasto è verificare l’estensione dell’infarto miocardio cronico, dove si deposita il contrasto, che appare bianco, mentre il miocardio sano appare con segnale annullato (in realtà avremo sempre un segnale diverso da zero per la natura del rumore MR). Per valutare la validità clinica delle immagini bisogna valutare il CNR tra la zona di LGE (cicatrice da infarto, ROI 1) ed il miocardio sano (ROI 2) (Figura 1.32).","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"OYIaQQoV8k"}],"key":"yqoirnbbOz"},{"type":"image","style":{"width":"100%"},"url":"/elab_bioimmagini-site/build/image-31-85f7fe20b77ced646ab3c52f2dc8ce71.png","alt":"LGE","key":"yKYtyePbla","urlSource":"./images/image-31.png"},{"type":"paragraph","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Figura 1.31. Immagini cardiache in LGE.","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"maGTLxQNQ0"}],"key":"NUdh7y3DTF"}],"key":"lwNa6PEDGo"},{"type":"image","style":{"width":"100%"},"url":"/elab_bioimmagini-site/build/image-32-a94d32f130b9de57607d326bd17b91ae.png","alt":"ROI_LGE","key":"a8Pd0sbaen","urlSource":"./images/image-32.png"},{"type":"paragraph","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"text","value":"Figura 1.32. Tracciamento di ROI su immagini cardiache.","position":{"start":{"line":25,"column":1},"end":{"line":25,"column":1}},"key":"fz9gsgWTdc"}],"key":"aP5PfGArPm"}],"key":"TJJk2LuIon"},{"type":"paragraph","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Come si vede le regioni in cui tracciare le ROI sono molto piccole, l’area LGE è di 60 mm^2 e l’area miocardio di 140 mm^2, corrispondenti (pixel size = 1.5 mm) a 26 e 60 pixel circa. La misura della SD sarà quindi inaffidabile. E’ molto più affidabile una misura fatta nello sfondo che permette di tracciare una ROI di 3350 mm^2 (1550 pixel circa). In questo caso essendo il miocardio annullato (segnale zero) e quindi con distribuzione di rumore simile al fondo il valore di CNR sarà:","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"LgC3JW42Hd"}],"key":"dHwQTINYK9"},{"type":"math","value":"CNR=2(M_{LGE}-M_{MIO})/(SD_{BK}+1.526S_{BK})","position":{"start":{"line":29,"column":1},"end":{"line":31,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>C</mi><mi>N</mi><mi>R</mi><mo>=</mo><mn>2</mn><mo stretchy=\"false\">(</mo><msub><mi>M</mi><mrow><mi>L</mi><mi>G</mi><mi>E</mi></mrow></msub><mo>−</mo><msub><mi>M</mi><mrow><mi>M</mi><mi>I</mi><mi>O</mi></mrow></msub><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mo stretchy=\"false\">(</mo><mi>S</mi><msub><mi>D</mi><mrow><mi>B</mi><mi>K</mi></mrow></msub><mo>+</mo><mn>1.526</mn><msub><mi>S</mi><mrow><mi>B</mi><mi>K</mi></mrow></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">CNR=2(M_{LGE}-M_{MIO})/(SD_{BK}+1.526S_{BK})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">CNR</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">2</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.109em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">L</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">GE</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.109em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">O</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord\">/</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1.526</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">K</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>","enumerator":"1","key":"EUNlTQyubk"},{"type":"paragraph","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"I metodi basati sull’analisi dell’istogramma cercano invece di caratterizzare il rumore dall’immagine nel suo complesso. In questo caso si utilizza tutta l’informazione contenuta nell’immagine per cui il problema visto nelle ROI non si pone. Consideriamo l’immagine ideale a sei pattern corrotta solo da rumore gaussiano ed il suo istogramma riportati in Figura 1.33.","position":{"start":{"line":33,"column":1},"end":{"line":33,"column":1}},"key":"KcRKDHmMNd"}],"key":"mF908nSwVB"},{"type":"image","style":{"width":"100%"},"url":"/elab_bioimmagini-site/build/image-33-81dd4a4321ca8d053c5a7945844fa680.png","alt":"imm_isto","key":"nWsV3TPwRm","urlSource":"./images/image-33.png"},{"type":"paragraph","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"children":[{"type":"text","value":"Figura 1.33. Fantoccio a 6 pattern con rumore Gaussiano e relativo istogramma.","position":{"start":{"line":37,"column":1},"end":{"line":37,"column":1}},"key":"fMSXdivgkm"}],"key":"voDjfZNPFD"}],"key":"jJrN0buzwv"},{"type":"paragraph","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"Se tracciamo una ROI all’interno di un pattern la SD del segnale nella ROI sarà sempre la stessa dipendendo dal rumore sommato all’immagine. Se invece tracciamo una ROI a cavallo di due pattern misureremo un valore più alto dovuto alla presenza di due tessuti con segnali diversi all’interno della ROI.","position":{"start":{"line":39,"column":1},"end":{"line":39,"column":1}},"key":"cBOOZOjAZQ"}],"key":"S9XzyNKmuk"},{"type":"image","style":{"width":"100%"},"url":"/elab_bioimmagini-site/build/image-34-eb140ba1151b8d3d89f22ee17c76016e.png","alt":"sd_isto","key":"j1JOPfqOfy","urlSource":"./images/image-34.png"},{"type":"paragraph","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"Figura 1.34. Mappa di SD e relativo istogramma.","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"u9qmz4l8I0"}],"key":"hOJPlwqxo4"}],"key":"O4M6pGrlPv"},{"type":"paragraph","position":{"start":{"line":45,"column":1},"end":{"line":47,"column":1}},"children":[{"type":"text","value":"Automatizzando la procedura, possiamo far scorrere sull’immagine un kernel (ad esempio 5x5) che rappresenta la ROI e valutare il valore della deviazione standard SD sulla regione di immagine coperta dal kernel. In MATLAB questa operazione è implementata dalla funzione stdfilt. Si otterranno quindi un numero di valori di SD uguale al numero di pixel dell’immagine. Nelle regioni all’interno dei pattern uniformi il valore della SD sarà pari alla deviazione standard del rumore σ, almeno nel caso di rumore gaussiano additivo. Nelle regioni a cavallo di due pattern il valore di SD sarà maggiore di σ. Come al solito la dimensione del kernel rappresenterà un compromesso tra l’esigenza di calcolare correttamente la SD e la necessità di avere la maggior parte delle misure eseguita su regioni omogenee.\nCome si vede dalla figura, l’istogramma della mappa SD avrà un picco in corrispondenza del valore di ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"bpt4gRPHeX"},{"type":"inlineMath","value":"\\sigma","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span>","key":"eYavuD3zoc"},{"type":"text","value":" ed una serie di valori più alti corrispondenti alle transizioni distribuiti in modo uniforme.\nSe l’immagine è composta prevalentemente da regioni omogenee (pochi pattern di forma regolare) si può supporre che il contributo delle regioni di transizione sia trascurabile e calcolare ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"ppDtDGOy5e"},{"type":"inlineMath","value":"\\sigma","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span>","key":"gun5vDsZQQ"},{"type":"text","value":" come media della mappa:","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"c3kDVCBHZt"}],"key":"WjaVs56izB"},{"type":"math","value":"\\sigma = mean(M_{SD})","position":{"start":{"line":49,"column":1},"end":{"line":51,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>σ</mi><mo>=</mo><mi>m</mi><mi>e</mi><mi>a</mi><mi>n</mi><mo stretchy=\"false\">(</mo><msub><mi>M</mi><mrow><mi>S</mi><mi>D</mi></mrow></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\sigma = mean(M_{SD})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">an</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.109em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>","enumerator":"2","key":"JJL4urIY32"},{"type":"paragraph","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"text","value":"In realtà è preferibile eliminare gli outliers dovuti ai bordi e computare la mediana della mappa SD invece che la media, cosa che consente di ottenere una stima più accurata. Infatti, al contrario della media, la mediana pesa meno gli alti valori di SD nella parte destra dell’istogramma.","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"oNKl7XgNQI"}],"key":"ApLD1OpEPZ"},{"type":"math","value":"\\sigma = median(M_{SD})","position":{"start":{"line":55,"column":1},"end":{"line":57,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>σ</mi><mo>=</mo><mi>m</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>a</mi><mi>n</mi><mo stretchy=\"false\">(</mo><msub><mi>M</mi><mrow><mi>S</mi><mi>D</mi></mrow></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\sigma = median(M_{SD})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">ian</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3283em;\"><span style=\"top:-2.55em;margin-left:-0.109em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">D</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>","enumerator":"3","key":"YPCwHLn1Lp"},{"type":"paragraph","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"text","value":"Se l’immagine presenta molte transizioni il metodo della mediana può dare risultati non corretti. In questo caso è possibile utilizzare l’istogramma calcolando il valore di σ dal picco principale (tipicamente il primo) dell’istogramma che come visto contiene l’informazione sulle regioni omogenee. Il valor medio di σ misurato sarà dato dalla posizione sull’asse ","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"AF3mXvCW2o"},{"type":"inlineMath","value":"x","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span>","key":"SX2MwImAPh"},{"type":"text","value":" del massimo valore dell’istogramma ","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"cbWB4aRzuN"},{"type":"inlineMath","value":"h","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>h</mi></mrow><annotation encoding=\"application/x-tex\">h</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">h</span></span></span></span>","key":"vlX3v8p257"},{"type":"text","value":". Cercheremo quindi il massimo dell’istogramma e porremo ","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"Aa1z7yUB3n"},{"type":"inlineMath","value":"\\sigma","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span>","key":"x7DvAWSyES"},{"type":"text","value":" uguale al valore di ","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"qjfyqWY6sU"},{"type":"inlineMath","value":"x","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span>","key":"dHlM9LZG39"},{"type":"text","value":" corrispondente a tale massimo:","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"GR1fFtOqw9"}],"key":"rDFiPuzQJr"},{"type":"math","value":"\\sigma = x:h(x)=max(h)","position":{"start":{"line":61,"column":1},"end":{"line":63,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>σ</mi><mo>=</mo><mi>x</mi><mo>:</mo><mi>h</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy=\"false\">(</mo><mi>h</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\sigma = x:h(x)=max(h)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">h</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">ma</span><span class=\"mord mathnormal\">x</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">h</span><span class=\"mclose\">)</span></span></span></span></span>","enumerator":"4","key":"tygjHAML7R"},{"type":"paragraph","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"children":[{"type":"text","value":"In Figura 1.35 è riportata la stima della SD per i diversi metodi.","position":{"start":{"line":65,"column":1},"end":{"line":65,"column":1}},"key":"FmhlOQ2ZDF"}],"key":"u57qYx2DZN"},{"type":"image","style":{"width":"100%"},"url":"/elab_bioimmagini-site/build/image-35-d695b4e021a0f36da8b6a1dfe5beac7b.png","alt":"stima_sd","key":"nBssCeiBs0","urlSource":"./images/image-35.png"},{"type":"paragraph","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"children":[{"type":"text","value":"Figura 1.35. Valori stimati di SD per diversi metodi.","position":{"start":{"line":69,"column":1},"end":{"line":69,"column":1}},"key":"NLKfwmYa0t"}],"key":"OknwGscgwa"}],"key":"QkNUjLeg69"},{"type":"paragraph","position":{"start":{"line":71,"column":1},"end":{"line":73,"column":1}},"children":[{"type":"text","value":"Questo approccio è simile ad un altro metodo utilizzato per la stima del rumore nel quale l’immagine viene divisa in ","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"WJQlgmvyBt"},{"type":"inlineMath","value":"N","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span>","key":"xYY98Lj28y"},{"type":"text","value":" quadrati di lato ","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"CRieDP54Vp"},{"type":"inlineMath","value":"k","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span>","key":"kxijtILbk7"},{"type":"text","value":" non sovrapposti di cui viene calcolata la SD, ed il valore di ","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"XDDT654ZkL"},{"type":"inlineMath","value":"\\sigma","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span>","key":"KrMXlqKTwF"},{"type":"text","value":" viene stimato come media degli m campioni con valore di SD più basso (al limite un singolo campione). Il metodo basato sull’istogramma è comunque in generale più accurato.\nCome si osserva dal grafico il metodo Mean sovrastima il valore del rumore, mentre gli altri due metodi danno una stima sostanzialmente corretta.\nTutti questi metodi si basano sull’assunzione di rumore gaussiano additivo. Se come avviene tipicamente nelle immagini biomediche questa assunzione non è verificata, bisogna operare sulla base della conoscenza del processo di acquisizione. Consideriamo ad esempio l’immagine MR di un phantom cilindrico, composto da tre cilindri concentrici, due riempiti con acqua e quello intermedio con olio (valore di segnale più alto). Essendo il fantoccio riempito con liquido perfettamente omogeneo il rumore biologico è trascurabile. Le dimensioni del fantoccio sono piccole rispetto al bore della macchina MR (15 cm circa) e quindi si può considerare nulla l’attenuazione. Come si osserva nell’immagine a destra ottenuta con una opportuna finestra di windowing, alcuni pixel dell’immagine non sono stati ricostruiti dal K-spazio ma rappresentano un “riempimento” per ottenere una immagine quadrata (zero-padding). A tali pixel in MR viene assegnato il valore convenzionale 0 e devono essere ignorati nell’elaborazione (Figura 1.36).","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"ilADncVMM6"}],"key":"p8OomzeRA4"},{"type":"image","style":{"width":"100%"},"url":"/elab_bioimmagini-site/build/image-36-3bcb11dccfdf36dbeccf1d3f3553b440.png","alt":"sd_e_zero_padding","key":"rkjOgsQtwO","urlSource":"./images/image-36.png"},{"type":"paragraph","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"children":[{"type":"text","value":"Figura 1.36. Zone di zero-padding evidenziate.","position":{"start":{"line":77,"column":1},"end":{"line":77,"column":1}},"key":"GqjsN5cnQR"}],"key":"ULJCIVwETn"}],"key":"cb74lxiBWU"},{"type":"paragraph","position":{"start":{"line":79,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"text","value":"Come sappiamo il valore di ","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"yFpspk6mFG"},{"type":"inlineMath","value":"\\sigma","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span>","key":"NdtxdLfyHe"},{"type":"text","value":" può essere stimato tracciando una ROI su un tessuto omogeneo oppure sul fondo introducendo un opportuno fattore di correzione che è noto trattandosi di una immagine MR.\nProcedendo in questo modo otteniamo i valori di ","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"yUfXHLuuWw"},{"type":"inlineMath","value":"\\sigma","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span>","key":"Wx4B1XSSH7"},{"type":"text","value":" per acqua e olio (uguali a meno dell’errore sperimentale) e del fondo che come ci aspettavamo è più basso. Dal valore stimato sul fondo possiamo ottenere la stima corretta applicando il fattore di conversione 1.526 (Figura 1.37).","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"lfMxU17CDp"}],"key":"Px6yciRV3P"},{"type":"image","style":{"width":"100%"},"url":"/elab_bioimmagini-site/build/image-37-31b6f83a423660e40911748d659c53c0.png","alt":"stima_sd_ROI","key":"GmxDdf21is","urlSource":"./images/image-37.png"},{"type":"paragraph","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"text","value":"Figura 1.37. Stima di SD basato su ROI.","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"JzxsVg93hK"}],"key":"MO74YR21nl"}],"key":"M637eaYYT8"},{"type":"paragraph","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"text","value":"Se vogliamo applicare i metodi automatici basati sull’istogramma dobbiamo calcolare la mappa SD ed il relativo istogramma, dove abbiamo eliminato dal computo i pixel a valore nullo (zero padding) (Figura 1.38).","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"FMk5aO2cKB"}],"key":"ZpI77KzjDj"},{"type":"image","style":{"width":"100%"},"url":"/elab_bioimmagini-site/build/image-38-826914259597a0857a72cb3325b0c3a0.png","alt":"stima_SD_automatica","key":"bcQb3V7wiv","urlSource":"./images/image-38.png"},{"type":"paragraph","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"children":[{"type":"text","value":"Figura 1.38. Stima della SD automatica.","position":{"start":{"line":90,"column":1},"end":{"line":90,"column":1}},"key":"XGnFWn4f0I"}],"key":"jN4uA6fzLq"}],"key":"BrO1bHhf9n"},{"type":"paragraph","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"children":[{"type":"text","value":"Come vediamo dal grafico abbiamo un singolo picco, che è però la combinazione dei valori di SD del fondo e di quelli dei due tessuti ad alto SNR. Il calcolo della media della mappa SD sovrastima fortemente ","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"xg8NUbRIMQ"},{"type":"inlineMath","value":"\\sigma","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span>","key":"Q6Ta8ogJyN"},{"type":"text","value":", in quanto gli alti valori di SD sui bordi alzano la media in modo significativo. Il valore della mediana è abbastanza simile alla SD del rumore di fondo, che rappresenta una parte rilevante dell’immagine. Considerando il massimo dell’istogramma si ha un valore addirittura minore alla SD del fondo. Tali valori dipendono dal rapporto tra numero di pixel del fondo e numero di pixel ad alto SNR e non sono generalizzabili. I valori di SD per i tre metodi sono disponibili nella seguente tabella:","position":{"start":{"line":92,"column":1},"end":{"line":92,"column":1}},"key":"xue9nJnKkO"}],"key":"jysh1RZPeX"},{"type":"table","position":{"start":{"line":94,"column":1},"end":{"line":96,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"text","value":"SD mean","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"UdGQNQjQiB"}],"key":"ZBqQPQGj5s"},{"type":"tableCell","header":true,"position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"text","value":"SD median","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"kSKYz4Di8w"}],"key":"ac9TPjW0PG"},{"type":"tableCell","header":true,"position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"children":[{"type":"text","value":"max hist","position":{"start":{"line":94,"column":1},"end":{"line":94,"column":1}},"key":"FFqPl5BdVp"}],"key":"FCAkKCk9U5"}],"key":"LF8z3tAWoq"},{"type":"tableRow","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"children":[{"type":"text","value":"22.3108","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"key":"paJ2439u4h"}],"key":"drpZuZVFeQ"},{"type":"tableCell","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"children":[{"type":"text","value":"10.0968","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"key":"VAdVHZNWa5"}],"key":"tvZ5sDQ1cY"},{"type":"tableCell","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"children":[{"type":"text","value":"7.8155","position":{"start":{"line":96,"column":1},"end":{"line":96,"column":1}},"key":"ryJmJLqZE6"}],"key":"cThNQaDU68"}],"key":"ulkiT9rQMt"}],"key":"KGNs9ud0fW"},{"type":"paragraph","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"children":[{"type":"text","value":"In questo caso sarà necessario identificare in qualche modo le due classi di pixel attraverso un opportuno algoritmo di segmentazione. Banalmente, se consideriamo solo i pixel con livello di grigio superiore a 100 (quindi solo acqua e olio, vedremo in seguito come ottenere tale soglia) abbiamo come istogramma della SD quello di Figura 1.39.","position":{"start":{"line":98,"column":1},"end":{"line":98,"column":1}},"key":"qW1hLSnT56"}],"key":"NIVw7yS57O"},{"type":"image","style":{"width":"100%"},"url":"/elab_bioimmagini-site/build/image-39-884f22862ed208bea8a9de487baa36a6.png","alt":"esempio_SD","key":"zY8W67U81u","urlSource":"./images/image-39.png"},{"type":"paragraph","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"children":[{"type":"text","value":"Figura 1.39. Mappa di deviazione standard e relativo istogramma.","position":{"start":{"line":103,"column":1},"end":{"line":103,"column":1}},"key":"ZFZvy8QtaJ"}],"key":"Bu7SXjX3or"}],"key":"BSObt2wrw9"},{"type":"paragraph","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"text","value":"Con le seguenti stime per la SD:","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"key":"HaH5KyYbsH"}],"key":"MXbUPvznUb"},{"type":"table","position":{"start":{"line":106,"column":1},"end":{"line":108,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"children":[{"type":"text","value":"SD mean","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"key":"uW2VoqQhyG"}],"key":"H4x4xKRR47"},{"type":"tableCell","header":true,"position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"children":[{"type":"text","value":"SD median","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"key":"ptjOou5PkF"}],"key":"hrwwBpl3gZ"},{"type":"tableCell","header":true,"position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"children":[{"type":"text","value":"max hist","position":{"start":{"line":106,"column":1},"end":{"line":106,"column":1}},"key":"wIwCIfHbhy"}],"key":"ZZINBVMfG9"}],"key":"GQNMpDDw50"},{"type":"tableRow","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"children":[{"type":"text","value":"69.5255","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"GetalOmZ2b"}],"key":"YLJJWCGDUn"},{"type":"tableCell","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"children":[{"type":"text","value":"15.7743","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"as5eIbvsAQ"}],"key":"Gm0LE6mLkA"},{"type":"tableCell","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"children":[{"type":"text","value":"12.3800","position":{"start":{"line":108,"column":1},"end":{"line":108,"column":1}},"key":"uatdvsG9hy"}],"key":"HOlG200so0"}],"key":"mHsUvwlGa2"}],"key":"OJ9m1tzmQJ"},{"type":"paragraph","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"children":[{"type":"text","value":"Come si osserva la stima con i metodi median e max hist migliora in modo significativo. In definitiva per la valutazione automatica del rumore nell’immagine biomedica occorre una scelta oculata dell’algoritmo sulla base delle caratteristiche dell’immagine.","position":{"start":{"line":110,"column":1},"end":{"line":110,"column":1}},"key":"wdUfATKSa0"}],"key":"fB9Asjus55"},{"type":"heading","depth":2,"position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"children":[{"type":"text","value":"Esercitazione","position":{"start":{"line":112,"column":1},"end":{"line":112,"column":1}},"key":"UCzO59SSPG"}],"identifier":"esercitazione","label":"Esercitazione","html_id":"esercitazione","implicit":true,"key":"o6kL2VVJBr"},{"type":"paragraph","position":{"start":{"line":113,"column":1},"end":{"line":114,"column":1}},"children":[{"type":"text","value":"Lo scopo dell’esercitazione è replicare le misure di qualità dell’immagine che vengono eseguite in un laboratorio MR in modo routinario. L’immagine a disposizione è quella di un fantoccio sferico utilizzato per la valutazione del rapporto segnale rumore e dell’uniformità di segnale (quindi una valutazione dell’eventuale presenza di attenuazione) (Figura 1.40).\nL’immagine è stata acquisita su una macchina MR Signa HDxt General Electric a 3 Tesla, come si può osservare dall’header DICOM. Il valore del campo PatientID = ‘geservice’ indica che le immagini sono state acquisite per un controllo di qualità. L’immagine è una immagine 2D Fast Spin Echo. Il fantoccio è una sfera con diametro 26 cm acquisita in modo da ottenere la massima sezione. Il FOV dovrebbe essere centrato sul centro della sfera, in realtà è abbastanza disassato ed ha il centro intorno a (233 253).","position":{"start":{"line":113,"column":1},"end":{"line":113,"column":1}},"key":"X81WarTlOo"}],"key":"CQCWiqUN2u"},{"type":"image","style":{"width":"100%"},"url":"/elab_bioimmagini-site/build/image-40-adc82991e9b53e3d969d1ed58477edea.png","alt":"fantoccio","key":"OMOCZ3dV6Q","urlSource":"./images/image-40.png"},{"type":"paragraph","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"children":[{"type":"text","value":"Figura 1.40. Fantoccio.","position":{"start":{"line":118,"column":1},"end":{"line":118,"column":1}},"key":"dlfHTFe4XF"}],"key":"kHmqFPJZQd"}],"key":"Z7SWqbPlJl"},{"type":"paragraph","position":{"start":{"line":120,"column":1},"end":{"line":121,"column":1}},"children":[{"type":"text","value":"Per la definizione del protocollo di misura ci riferiamo al Protocollo definito dalla CONSIP per l’esecuzione dei controlli di qualità su scanner MR. La CONSIP è la centrale acquisti per la pubblica amministrazione italiana, e gestisce quindi anche gli acquisti nella sanità pubblica. In particolare, la CONSIP dovrebbe riuscire a migliorare la qualità degli acquisti e ridurre i costi grazie all’aggregazione della domanda sul tutto il territorio nazionale. Nella pratica con cadenza periodica (tipicamente due anni) la CONSIP bandisce una gara per l’acquisizione di apparecchiature mediche e valuta la qualità delle apparecchiature oltre che il costo proposto dai fornitori partecipanti. In base alla qualità rilevata e al costo viene selezionato un fornitore al quale nei due anni successivi si dovrà rivolgere preferibilmente ogni struttura sanitaria pubblica. Il protocollo, che è pubblico, è disponibile come materiale integrativo del corso.\nPer la misura dell’SNR il protocollo è tipicamente strutturato come:","position":{"start":{"line":120,"column":1},"end":{"line":120,"column":1}},"key":"QUFdMwd5cy"}],"key":"vjF13QgcAk"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":122,"column":1},"end":{"line":127,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Definire sull’immagine una ROI (ROI75) posizionata al centro dell’oggetto test di dimensioni pari al 75% dell’oggetto. Determinare il valor medio del segnale nella ROI75.","position":{"start":{"line":122,"column":1},"end":{"line":122,"column":1}},"key":"zfwkoUKlzU"}],"key":"v93hOFFc4q"}],"key":"GtLMb1Enlr"},{"type":"listItem","spread":true,"position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Definire una ROI (ROI10) in una zona priva di segnale (fondo) di dimensioni pari al 10% dell’oggetto. Determinare il valor medio del segnale nella ROI10 (valore di baseline).","position":{"start":{"line":123,"column":1},"end":{"line":123,"column":1}},"key":"ORvfRoxZej"}],"key":"QQKOn9Sk6D"}],"key":"qEFbKQTP9k"},{"type":"listItem","spread":true,"position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Determinare il segnale S come differenza dei valori di segnale tra ROI75 e ROI10.","position":{"start":{"line":124,"column":1},"end":{"line":124,"column":1}},"key":"L3bOfFdGFB"}],"key":"rCMVXc6vTK"}],"key":"nKhiKpxBKS"},{"type":"listItem","spread":true,"position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Valutare il rumore N sull’immagine come la deviazione standard del segnale all’interno della ROI75","position":{"start":{"line":125,"column":1},"end":{"line":125,"column":1}},"key":"bzDbWjt9A5"}],"key":"thD3ZUxcsJ"}],"key":"Car9OSVdoo"},{"type":"listItem","spread":true,"position":{"start":{"line":126,"column":1},"end":{"line":127,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Calcolare il valore di SNR come ","position":{"start":{"line":126,"column":1},"end":{"line":126,"column":1}},"key":"HeiOFtDHEJ"},{"type":"inlineMath","value":"SNR=S/N","position":{"start":{"line":126,"column":1},"end":{"line":126,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>N</mi><mi>R</mi><mo>=</mo><mi>S</mi><mi mathvariant=\"normal\">/</mi><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">SNR=S/N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">SNR</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span>","key":"sAGAfsQucZ"},{"type":"text","value":".","position":{"start":{"line":126,"column":1},"end":{"line":126,"column":1}},"key":"gbUIlodFlH"}],"key":"prcocNQqGb"}],"key":"IWdJwpO4aH"}],"key":"ex32mOVABF"},{"type":"paragraph","position":{"start":{"line":128,"column":1},"end":{"line":129,"column":1}},"children":[{"type":"text","value":"Il motivo per cui il protocollo prevede il calcolo della baseline (punto 2) è che il produttore della macchina potrebbe sommare arbitrariamente un valore costante all’immagine facendo salire S e quindi il valore di SNR senza modificare il contrasto. Quindi in realtà la procedura misura il valore di CNR tra il fantoccio ed il fondo.\nDovremo quindi realizzare un programma MATLAB che implementi in modo automatico la procedura del protocollo assicurando che vengano rispettate le indicazioni, in particolare quelle sulle dimensioni delle ROI e che fornisca in uscita il valore di SNR.","position":{"start":{"line":128,"column":1},"end":{"line":128,"column":1}},"key":"VlHgdK5WE7"}],"key":"VFHXy33YHR"},{"type":"paragraph","position":{"start":{"line":131,"column":1},"end":{"line":136,"column":1}},"children":[{"type":"text","value":"Il MATLAB fornisce varie funzioni per il tracciamento di ROI. La più semplice è la funzione ","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"WMNHA6aIfE"},{"type":"inlineCode","value":"getrect","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"pxwrOEJCXR"},{"type":"text","value":" che permette di tracciare una ROI rettangolare con il mouse su una immagine. Funzioni più complete sono quelle del toolbox “ROI-Based Processing” come ","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"g9scZ8XdQU"},{"type":"inlineCode","value":"drawfreehand","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"W3YpHKp14Y"},{"type":"text","value":" che permette di tracciare una ROI a mano libera, ","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"U13rp1nLcf"},{"type":"inlineCode","value":"drawcircle","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"u2FvFls1at"},{"type":"text","value":" (cerchio), ","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"PQ2I1QGQM5"},{"type":"inlineCode","value":"drawellipse","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"W7EkTChLKJ"},{"type":"text","value":" (ellisse), ","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"BoV70ewxnk"},{"type":"inlineCode","value":"drawpolygon","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"YAttiCKgSP"},{"type":"text","value":" (poligono generico), ","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"BMyQONlUbW"},{"type":"inlineCode","value":"drawrectangle","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"hYbG6tJ0Wa"},{"type":"text","value":" (rettangolo), etc. In Python, funzionalità analoghe sono fornite da librerie di visualizzazione e image processing.\nIn particolare, la libreria ","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"sKQmPqfUH2"},{"type":"strong","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"children":[{"type":"text","value":"matplotlib","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"zTO69U8WaA"}],"key":"F6zH2XP6YO"},{"type":"text","value":" permette di tracciare ROI rettangolari interattive\ntramite widget dedicati, mentre la libreria ","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"xxnEJ1oAOz"},{"type":"strong","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"children":[{"type":"text","value":"napari","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"kmNIGSErpa"}],"key":"mWmd47KFwE"},{"type":"text","value":" offre strumenti più completi per il\ndisegno e la gestione di ROI interattive. Napari consente il tracciamento di ROI a mano libera, circolari, ellittiche, poligonali e\nrettangolari, in modo analogo alle funzioni ","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"PrML84tYNK"},{"type":"inlineCode","value":"drawfreehand","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"iK0pJY6XZv"},{"type":"text","value":", ","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"adTKuV21fk"},{"type":"inlineCode","value":"drawcircle","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"Z3GkhkQWlC"},{"type":"text","value":", ","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"BgZ9YMgDXV"},{"type":"inlineCode","value":"drawellipse","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"MWMAaB6wlP"},{"type":"text","value":",\n","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"mdz1vvGc2E"},{"type":"inlineCode","value":"drawpolygon","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"ggMHsogeRB"},{"type":"text","value":" e ","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"tORykbj1Q2"},{"type":"inlineCode","value":"drawrectangle","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"BelbHTnGuy"},{"type":"text","value":" del toolbox ","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"kszNErYhIZ"},{"type":"emphasis","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"children":[{"type":"text","value":"ROI-Based Processing","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"QfY3iI7OGS"}],"key":"MOXYwQpq9R"},{"type":"text","value":" di MATLAB.","position":{"start":{"line":131,"column":1},"end":{"line":131,"column":1}},"key":"vefmRgc7s6"}],"key":"aDJPYFMDXg"},{"type":"paragraph","position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"children":[{"type":"text","value":"Il calcolo dell’uniformità, e quindi della presenza di un campo di attenuazione, viene effettuato con la seguente procedura:","position":{"start":{"line":138,"column":1},"end":{"line":138,"column":1}},"key":"dq2wxApGqh"}],"key":"RbT9Y9dkp2"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":139,"column":1},"end":{"line":143,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Definire sull’immagine una ROI (ROI80) posizionata al centro dell’oggetto test di dimensioni pari al 80% dell’oggetto.","position":{"start":{"line":139,"column":1},"end":{"line":139,"column":1}},"key":"JGkm8sKuP0"}],"key":"y6PvuLtTbq"}],"key":"qfVn9oNIqx"},{"type":"listItem","spread":true,"position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Determinare il valor medio del segnale nella ROI80 (","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"iGWxuIzg71"},{"type":"inlineMath","value":"Sm","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">Sm</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">m</span></span></span></span>","key":"ZOzZzDz5kw"},{"type":"text","value":") ed il numero di pixel contenuti nella ROI80 (","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"xZXzrgUApB"},{"type":"inlineMath","value":"N","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>N</mi></mrow><annotation encoding=\"application/x-tex\">N</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span></span></span></span>","key":"IZQtArPa1i"},{"type":"text","value":")","position":{"start":{"line":140,"column":1},"end":{"line":140,"column":1}},"key":"tRYdFWaV2N"}],"key":"HtRqM0X8t7"}],"key":"kpgdGR0DN7"},{"type":"listItem","spread":true,"position":{"start":{"line":141,"column":1},"end":{"line":141,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Determinare la deviazione media assoluta ","position":{"start":{"line":141,"column":1},"end":{"line":141,"column":1}},"key":"yif3rOPJ9S"},{"type":"inlineMath","value":"AAD = \\sum _{i} |S_{i}-S_{m}|/N_{i}","position":{"start":{"line":141,"column":1},"end":{"line":141,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>A</mi><mi>D</mi><mo>=</mo><msub><mo>∑</mo><mi>i</mi></msub><mi mathvariant=\"normal\">∣</mi><msub><mi>S</mi><mi>i</mi></msub><mo>−</mo><msub><mi>S</mi><mi>m</mi></msub><mi mathvariant=\"normal\">∣</mi><mi mathvariant=\"normal\">/</mi><msub><mi>N</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">AAD = \\sum _{i} |S_{i}-S_{m}|/N_{i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">AA</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0497em;vertical-align:-0.2997em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:0em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.162em;\"><span style=\"top:-2.4003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.1514em;\"><span style=\"top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">m</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣/</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:-0.109em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>","key":"GjKH0f4Ih7"},{"type":"text","value":" dove Si è il valore di segnale dei singoli pixel contenuti nella ROI80","position":{"start":{"line":141,"column":1},"end":{"line":141,"column":1}},"key":"QVT7L86pbg"}],"key":"JYOszqbD3J"}],"key":"i4hu2lgMh8"},{"type":"listItem","spread":true,"position":{"start":{"line":142,"column":1},"end":{"line":143,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Calcolare ","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"key":"M9hOfctHKm"},{"type":"inlineMath","value":"UH = 1-ADD/Sm","position":{"start":{"line":142,"column":1},"end":{"line":142,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>U</mi><mi>H</mi><mo>=</mo><mn>1</mn><mo>−</mo><mi>A</mi><mi>D</mi><mi>D</mi><mi mathvariant=\"normal\">/</mi><mi>S</mi><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">UH = 1-ADD/Sm</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">DD</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">m</span></span></span></span>","key":"mS0C958GrS"}],"key":"ZqBtIO6cdg"}],"key":"nKXzTxw6ma"}],"key":"v3YF1AMJDC"},{"type":"paragraph","position":{"start":{"line":144,"column":1},"end":{"line":146,"column":1}},"children":[{"type":"text","value":"In assenza di rumore, se non c’è attenuazione ","position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"key":"UAjpjjlAMp"},{"type":"inlineMath","value":"ADD=0","position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>D</mi><mi>D</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">ADD=0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">DD</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0</span></span></span></span>","key":"FTWAvezvxc"},{"type":"text","value":" e ","position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"key":"j0vInTCdmM"},{"type":"inlineMath","value":"UH=1","position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>U</mi><mi>H</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">UH=1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">1</span></span></span></span>","key":"mwvGEaENhC"},{"type":"text","value":" (massima uniformità, nessuna attenuazione). Se c’è attenuazione, ci sarà una variazione di segnale e ADD sarà maggiore di zero abbassando il valore di ","position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"key":"HrMIedpe5G"},{"type":"inlineMath","value":"UH","position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>U</mi><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">UH</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span></span></span></span>","key":"JAXxRCXMjz"},{"type":"text","value":". Per un’immagine reale ci sarà presenza di rumore e ADD sarà comunque diverso da zero in quanto il segnale varierà. Il presupposto della misura è che Sm sarà molto alto, in quanto il fantoccio sarà costruito a questo scopo, per cui in assenza di attenuazione ","position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"key":"P2i9nNajPI"},{"type":"inlineMath","value":"UH","position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>U</mi><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">UH</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span></span></span></span>","key":"qxE7TouzE9"},{"type":"text","value":" sarà molto vicino ad uno.\nAnche in questo caso dovremo realizzare un programma MATLAB automatico che implementi la procedura del protocollo assicurando che vengano rispettate le indicazioni, in particolare quelle sulle dimensioni delle ROI, e che fornisca in uscita il valore di ","position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"key":"Ds9cZvzNnh"},{"type":"inlineMath","value":"UH","position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>U</mi><mi>H</mi></mrow><annotation encoding=\"application/x-tex\">UH</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">U</span><span class=\"mord mathnormal\" style=\"margin-right:0.08125em;\">H</span></span></span></span>","key":"vYih1R1jUe"},{"type":"text","value":".\nInfine, andiamo a valutare la presenza di PVE sull’immagine 1 del fantoccio calcolando l’acutezza della transizione. A questo scopo occorre definire un profilo, cioè un segmento posto sull’immagine che intersechi una transizione, ed estrarre il grafico del valore di segnale sul profilo, come esemplificato in figura per il software ImageJ.","position":{"start":{"line":144,"column":1},"end":{"line":144,"column":1}},"key":"Iq4zMRm1Ty"}],"key":"fYPgJ9eQMk"},{"type":"image","style":{"width":"100%"},"url":"/elab_bioimmagini-site/build/image-41-ac1a3d6501850d38375651cca407fcce.png","alt":"profilo","key":"iU2DC45fVp","urlSource":"./images/image-41.png"},{"type":"paragraph","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"children":[{"type":"emphasis","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"children":[{"type":"text","value":"Figura 1.41. Tracciamento di un profilo.","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"A97DMg7pME"}],"key":"IHsIrkK5ho"}],"key":"JlkqAarYgk"},{"type":"paragraph","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"children":[{"type":"text","value":"Dato il profilo, il valore di acutezza si ottiene utilizzando la formula:","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"key":"oFl7XkYIre"}],"key":"qn5Wf6kxLY"},{"type":"math","value":"A = \\frac{1}{f(b) - f(a)} \\int_{a}^{b}\n\\left[ \\frac{d}{dx} f(x) \\right]^2 \\, dx","position":{"start":{"line":154,"column":1},"end":{"line":157,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>A</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><msubsup><mo>∫</mo><mi>a</mi><mi>b</mi></msubsup><msup><mrow><mo fence=\"true\">[</mo><mfrac><mi>d</mi><mrow><mi>d</mi><mi>x</mi></mrow></mfrac><mi>f</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo fence=\"true\">]</mo></mrow><mn>2</mn></msup><mtext> </mtext><mi>d</mi><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">A = \\frac{1}{f(b) - f(a)} \\int_{a}^{b}\n\\left[ \\frac{d}{dx} f(x) \\right]^2 \\, dx</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.604em;vertical-align:-0.95em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3214em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop\"><span class=\"mop op-symbol large-op\" style=\"margin-right:0.44445em;position:relative;top:-0.0011em;\">∫</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.599em;\"><span style=\"top:-1.7881em;margin-left:-0.4445em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span style=\"top:-3.8129em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9119em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\"><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">[</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3714em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">]</span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.654em;\"><span style=\"top:-3.9029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span></span></span></span></span>","enumerator":"5","key":"GUZ8U8sSht"},{"type":"paragraph","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"children":[{"type":"text","value":"Dove ","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"key":"uW8DunbgSZ"},{"type":"inlineMath","value":"f","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">f</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8889em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span>","key":"yteEd8XOMe"},{"type":"text","value":" è il profilo estratto e ","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"key":"Fws0lWOEfm"},{"type":"inlineMath","value":"a","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span>","key":"GhzTRluSvT"},{"type":"text","value":" e ","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"key":"N7gd7UygzK"},{"type":"inlineMath","value":"b","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span>","key":"rPkJygf6mk"},{"type":"text","value":" sono l’inizio e la fine della transizione. Essendo l’immagine discreta, l’integrale viene approssimato come:","position":{"start":{"line":159,"column":1},"end":{"line":159,"column":1}},"key":"q7NX7Hg5lP"}],"key":"G84QsxtlpC"},{"type":"math","value":"A = \\frac{1}{f(b) - f(a)} \\sum_{a}^{b}\n\\left[ \\frac{f(i+1)-f(i)}{d}\\right]^2","position":{"start":{"line":161,"column":1},"end":{"line":164,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>A</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>b</mi><mo stretchy=\"false\">)</mo><mo>−</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>a</mi><mo stretchy=\"false\">)</mo></mrow></mfrac><munderover><mo>∑</mo><mi>a</mi><mi>b</mi></munderover><msup><mrow><mo fence=\"true\">[</mo><mfrac><mrow><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy=\"false\">)</mo><mo>−</mo><mi>f</mi><mo stretchy=\"false\">(</mo><mi>i</mi><mo stretchy=\"false\">)</mo></mrow><mi>d</mi></mfrac><mo fence=\"true\">]</mo></mrow><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">A = \\frac{1}{f(b) - f(a)} \\sum_{a}^{b}\n\\left[ \\frac{f(i+1)-f(i)}{d}\\right]^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.0861em;vertical-align:-1.25em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3214em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">b</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">a</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8361em;\"><span style=\"top:-1.9em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">a</span></span></span></span><span style=\"top:-3.05em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">b</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.25em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"minner\"><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">[</span></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">d</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">i</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">i</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">]</span></span></span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.654em;\"><span style=\"top:-3.9029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span>","enumerator":"6","key":"MLON3nS7TS"},{"type":"paragraph","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"children":[{"type":"text","value":"Dove ","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"key":"OlQ0lKnWAv"},{"type":"inlineMath","value":"d","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">d</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">d</span></span></span></span>","key":"yoXw03m0ZL"},{"type":"text","value":" è la dimensione del pixel. I punti ","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"key":"EQGljAjae8"},{"type":"inlineMath","value":"a","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span>","key":"OgckNLsB2K"},{"type":"text","value":" e ","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"key":"nwjZMb74ls"},{"type":"inlineMath","value":"b","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span>","key":"XiykcU3JCx"},{"type":"text","value":" (inizio e fine della transizione) possono essere definiti manualmente, ma è opportuno automatizzare la procedura per ridurre la variabilità dovuta all’osservatore. Da un punto di vista teorico, all’inizio del profilo il segnale avrà un valore dato dalla baseline (valor medio del fondo) più il rumore con SD sigma. Potremmo definire una soglia conservativa (come baseline + ","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"key":"DvMFsfy9ee"},{"type":"inlineMath","value":"4\\sigma","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>4</mn><mi>σ</mi></mrow><annotation encoding=\"application/x-tex\">4\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">4</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span>","key":"MiZZVjvlZh"},{"type":"text","value":") al di sopra della quale è estremamente improbabile che il segnale misurato sul profilo sia originato da un pixel del fondo. Analogamente potremmo definire una soglia per la fine della transizione. Nella pratica si utilizza un approccio più semplice, ad esempio, possiamo convenire che ","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"key":"bJDrpgxbnj"},{"type":"inlineMath","value":"a","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span>","key":"omG7ShnLo5"},{"type":"text","value":" e ","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"key":"viDD7FVpSk"},{"type":"inlineMath","value":"b","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span>","key":"UWsrr6IgoF"},{"type":"text","value":" siano i punti in cui il segnale raggiunge il 10% ed il 90% del suo valore massimo teorico misurato in precedenza (","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"key":"Zrerlz3ICx"},{"type":"inlineMath","value":"Sm","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">Sm</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">m</span></span></span></span>","key":"smW3HQlgYA"},{"type":"text","value":"), rispettivamente. Andranno quindi fissate due soglie ","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"key":"XqanOX5BDr"},{"type":"inlineMath","value":"0.1*Sm","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0.1</mn><mo>∗</mo><mi>S</mi><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">0.1*Sm</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0.1</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">m</span></span></span></span>","key":"MN7mhbpCx3"},{"type":"text","value":" e ","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"key":"ALH7W90JBD"},{"type":"inlineMath","value":"0.9*Sm","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>0.9</mn><mo>∗</mo><mi>S</mi><mi>m</mi></mrow><annotation encoding=\"application/x-tex\">0.9*Sm</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">0.9</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6833em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">m</span></span></span></span>","key":"NWOLpUb4V8"},{"type":"text","value":" in modo da trovare ","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"key":"DDf5LMSUTo"},{"type":"inlineMath","value":"a","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">a</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.4306em;\"></span><span class=\"mord mathnormal\">a</span></span></span></span>","key":"Jc7LKeB1PE"},{"type":"text","value":" e ","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"key":"VTmFMly1ir"},{"type":"inlineMath","value":"b","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>b</mi></mrow><annotation encoding=\"application/x-tex\">b</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord mathnormal\">b</span></span></span></span>","key":"BZYqiSWpBs"},{"type":"text","value":".","position":{"start":{"line":166,"column":1},"end":{"line":166,"column":1}},"key":"UiRXy4U7qs"}],"key":"b336jsLDWJ"},{"type":"paragraph","position":{"start":{"line":168,"column":1},"end":{"line":168,"column":1}},"children":[{"type":"text","value":"Dovremo realizzare quindi un programma Python che implementi il calcolo dell’acutezza su di un profilo definibile dall’utente o calcolato in modo automatico.","position":{"start":{"line":168,"column":1},"end":{"line":168,"column":1}},"key":"OzQkASQ9uR"}],"key":"GWZirNDzpE"},{"type":"paragraph","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"children":[{"type":"text","value":"Risultati attesi:","position":{"start":{"line":170,"column":1},"end":{"line":170,"column":1}},"key":"JHLxMuXwo9"}],"key":"pGBmzik94p"},{"type":"table","position":{"start":{"line":171,"column":1},"end":{"line":173,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"text","value":"SNR","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"key":"B6FaqrObBP"}],"key":"piLrBB5D7E"},{"type":"tableCell","header":true,"position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"text","value":"UH","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"key":"DRXivuch4e"}],"key":"HyfrVHwbGN"},{"type":"tableCell","header":true,"position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"children":[{"type":"text","value":"Acutezza","position":{"start":{"line":171,"column":1},"end":{"line":171,"column":1}},"key":"ZoiRG516I3"}],"key":"CQjESYxtYl"}],"key":"rJcf6ZoqtN"},{"type":"tableRow","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"children":[{"type":"text","value":"8","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"hdbAlwiY2U"}],"key":"PKolsHLGgu"},{"type":"tableCell","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"children":[{"type":"text","value":"0.90","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"tE86TV2UMB"}],"key":"Hmfbj7Nlue"},{"type":"tableCell","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"children":[{"type":"text","value":"415","position":{"start":{"line":173,"column":1},"end":{"line":173,"column":1}},"key":"PBQ7Re48tk"}],"key":"Xw64rZjHYd"}],"key":"I73hvCe1hT"}],"key":"ojSxbod88t"}],"key":"rdv33nOEBa"}],"key":"hy2uV0FlTE"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Esempio di rumore riciano in MRI - Notebook 1.3","url":"/n-1-3-mr-noise-example","group":"Capitolo1"},"next":{"title":"Effetto del PVE sul profilo - Notebook 1.4","url":"/zn-1-4-profile","group":"Capitolo1"}}},"domain":"http://localhost:3000"}