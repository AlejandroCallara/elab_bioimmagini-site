{"version":3,"kind":"Article","sha256":"c200735a0d43b0b36904965ad51ae83ee690e9c0b208f68449b32d57faac76ad","slug":"n-3-10-thinning","location":"/capitolo3/n_3_10_thinning.md","dependencies":[],"frontmatter":{"title":"Esempio algoritmo di thinning - Codice 3.10","content_includes_title":false,"numbering":{"title":{"offset":1}},"exports":[{"format":"md","filename":"n_3_10_thinning.md","url":"/elab_bioimmagini-site/build/n_3_10_thinning-5234c37e823df2d223a24739d1ad5f59.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Nel seguente codice Ã¨ simulato il comportamento di un algoritmo di thinning.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ldAUa5id7g"}],"key":"PnRdADk4rk"},{"type":"code","lang":"python","value":"# -*- coding: utf-8 -*-\n\"\"\"\nCreated on Fri Jun  7 16:23:24 2024\n\n@author: alejandro\n\"\"\"\n\nimport numpy as np\nimport matplotlib.pyplot as plt\nfrom scipy.ndimage import binary_hit_or_miss\n\nimage = plt.imread('./data/hippo.jpg')\nimage = (1-image/255)>0.5\nimage_or= np.copy(image)\n\nplt.figure()\nplt.imshow(image, cmap=\"gray\")\nplt.show()\n\n# kernels for thinning\nk2 = np.array([[0,0,0],[-1,1,-1],[1,1,1]])\nprint(k2)\n\nk3 = np.array([[-1,0,0],[1,1,0],[-1,1,-1]])\nprint(k3)\n\n# iterations\nn = 100\n\nfig, ax = plt.subplots(1,3)\nax[0].imshow(image, cmap=\"gray\")\nax[0].axis(\"image\")\n\nplt.ion()\nplt.show(block=False)\nfor k in range(0,70):\n    # apply kernels\n    tmp = binary_hit_or_miss(image, structure1=k2)\n    image = (image.astype(np.float32) - tmp.astype(np.float32)).astype(bool)\n    tmp = binary_hit_or_miss(image, structure1=k3)\n    image = (image.astype(np.float32) - tmp.astype(np.float32)).astype(bool)\n    \n    # apply rotated kernels\n    tmp = binary_hit_or_miss(image, structure1=np.rot90(k2))\n    image = (image.astype(np.float32) - tmp.astype(np.float32)).astype(bool)\n    tmp = binary_hit_or_miss(image, structure1=np.rot90(k3))\n    image = (image.astype(np.float32) - tmp.astype(np.float32)).astype(bool)\n    \n    \n    tmp = binary_hit_or_miss(image, structure1=np.rot90(k2,2))\n    image = (image.astype(np.float32) - tmp.astype(np.float32)).astype(bool)\n    tmp = binary_hit_or_miss(image, structure1=np.rot90(k3,2))\n    image = (image.astype(np.float32) - tmp.astype(np.float32)).astype(bool)\n    \n    \n    tmp = binary_hit_or_miss(image, structure1=np.rot90(k2,3))\n    image = (image.astype(np.float32) - tmp.astype(np.float32)).astype(bool)\n    tmp = binary_hit_or_miss(image, structure1=np.rot90(k3,3))\n    image = (image.astype(np.float32) - tmp.astype(np.float32)).astype(bool)\n    \n    ax[1].cla(); ax[1].imshow(image, cmap=\"gray\"); \n    ax[1].axis(\"image\")\n    ax[2].cla(); ax[2].imshow(image_or & ~image, cmap=\"gray\"); \n    ax[2].axis(\"image\")\n\n    fig.canvas.draw()\n    fig.canvas.flush_events()\n    plt.pause(0.1)\nplt.show()","position":{"start":{"line":5,"column":1},"end":{"line":75,"column":1}},"key":"BgeJDRbp9q"}],"key":"pOvybDRL3S"}],"key":"xnctIiR7Cs"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Esempio di component tree - Notebook 3.9","url":"/n-3-9-connected-tree-example","group":"Capitolo3"},"next":{"title":"Esercitazione 3: segmentazione su immagini di perfusione cardiaca","url":"/z-3-1-esercitazione","group":"Capitolo3"}}},"domain":"http://localhost:3000"}