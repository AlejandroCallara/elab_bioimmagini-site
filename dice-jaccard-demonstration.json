{"version":3,"kind":"Notebook","sha256":"2892558996e4139c668291299786d98b7cbc231cb125cdb27d36346bc80739f0","slug":"dice-jaccard-demonstration","location":"/capitolo4/dice-jaccard-demonstration.ipynb","dependencies":[],"frontmatter":{"kernelspec":{"name":"python3","display_name":"Python 3","language":"python"},"numbering":{"title":{"offset":1}},"exports":[{"format":"ipynb","filename":"dice-jaccard-demonstration.ipynb","url":"/elab_bioimmagini-site/build/dice-jaccard-demonst-4d4fe260207f4c66eb5895eae61a0cc0.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Esempio di calcolo degli indici di Jaccard e Dice","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rnLditlPiW"}],"key":"GBTk3s4kef"}],"key":"Ah6znprX19"}],"key":"xvxemlHByt"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Importiamo le librerie necessarie","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wFK8r0NeRl"}],"key":"NU2YrILAEm"}],"key":"Kuv4SoKIkx"},{"type":"block","kind":"notebook-code","data":{"trusted":true,"execution":{"iopub.status.busy":"2026-01-22T15:21:13.117190Z","iopub.execute_input":"2026-01-22T15:21:13.117594Z","iopub.status.idle":"2026-01-22T15:21:13.123144Z","shell.execute_reply.started":"2026-01-22T15:21:13.117564Z","shell.execute_reply":"2026-01-22T15:21:13.122098Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\nimport numpy as np\nfrom sklearn.metrics import jaccard_score\nfrom scipy.spatial.distance import dice","key":"TelvsPtre6"},{"type":"outputs","id":"WdA7tL1MIxidcXtEfnH22","children":[],"key":"p1W4qWMjaw"}],"key":"HttKOd26AP"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Creiamo due maschere parzialmente sovrapposte","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CfwVZi6BbT"}],"key":"arbHQaLMCp"}],"key":"R9aXktheAP"},{"type":"block","kind":"notebook-code","data":{"trusted":true,"execution":{"iopub.status.busy":"2026-01-22T15:21:18.432948Z","iopub.execute_input":"2026-01-22T15:21:18.433324Z","iopub.status.idle":"2026-01-22T15:21:18.443790Z","shell.execute_reply.started":"2026-01-22T15:21:18.433294Z","shell.execute_reply":"2026-01-22T15:21:18.442875Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"dim=256  # image dimension\n\n# create masks\nA = np.zeros([dim,dim])  # background images\nB = np.zeros([dim,dim])\ncenter_mask_A = [int(dim/2),int(dim/2)] # center of A mask\ndim_mask_A = [int(dim/4),int(dim/4)]            # dimension of A mask\nA[center_mask_A[0]-dim_mask_A[0]:center_mask_A[0]+dim_mask_A[0],center_mask_A[1]-dim_mask_A[1]:center_mask_A[1]+dim_mask_A[1]]=1\n\nshift_mask=20  # shift between masks\ncenter_mask_B = [int(dim/2)+shift_mask,int(dim/2)+shift_mask] # center of B mask\ndim_mask_B=dim_mask_A # dimension of B mask\nB[center_mask_B[0]-dim_mask_B[0]:center_mask_B[0]+dim_mask_B[0],center_mask_B[1]-dim_mask_B[1]:center_mask_B[1]+dim_mask_B[1]]=1","key":"LPLaNfAFRl"},{"type":"outputs","id":"CQEF5HR7M73kAvdXRxvvG","children":[],"key":"kViNmPWs7d"}],"key":"NJ3OY0c0AN"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Visualizziamo le maschere risultanti, l’overlapping area dovrebbe apparire in bianco (tutti i canali uguali)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IlIYi4LiCn"}],"key":"C6sCvAgpFq"}],"key":"snxmaYBbQ2"},{"type":"block","kind":"notebook-code","data":{"trusted":true,"execution":{"iopub.status.busy":"2026-01-22T15:21:23.861435Z","iopub.execute_input":"2026-01-22T15:21:23.861830Z","iopub.status.idle":"2026-01-22T15:21:24.274391Z","shell.execute_reply.started":"2026-01-22T15:21:23.861800Z","shell.execute_reply":"2026-01-22T15:21:24.273316Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"fig = plt.figure(figsize=(10,4)) \naxs0 = fig.add_subplot(1, 3, 1)\naxs1 = fig.add_subplot(1, 3, 2)\naxs2 = fig.add_subplot(1, 3, 3)\nimgplot = axs0.imshow(A,cmap='gray')\naxs0.set_title(\"Image A\",fontsize=12)\naxs0.set_axis_off()\nimgplot = axs1.imshow(B,cmap='gray')\naxs1.set_title(\"Image B\",fontsize=12)\naxs1.set_axis_off()\nRGB_image=np.zeros([dim,dim,3])  # create RGB image\nRGB_image[:,:,0]=A\nRGB_image[:,:,1]=B\nRGB_image[:,:,2]=B\nimgplot = axs2.imshow(RGB_image,cmap='viridis')\naxs2.set_title(\"Image RGB\",fontsize=12)\naxs2.set_axis_off()","key":"ND5nwAp7FG"},{"type":"outputs","id":"pGNMAmhHbXoG5ib8IUl1s","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"text/plain":{"content":"<Figure size 1000x400 with 3 Axes>","content_type":"text/plain"},"image/png":{"content_type":"image/png","hash":"dc85ae56c732c085f6db6e189657e374","path":"/elab_bioimmagini-site/build/dc85ae56c732c085f6db6e189657e374.png"}}},"children":[],"key":"UmiktV7XAn"}],"key":"T66wa6jRro"}],"key":"UcNV4hFo4F"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calcoliamo la sovrapposizione tra le maschere (overlapping area)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TicuZIGgtf"}],"key":"rt6XoRcQqk"}],"key":"TZsfH3cYVI"},{"type":"block","kind":"notebook-code","data":{"trusted":true,"execution":{"iopub.status.busy":"2026-01-22T15:21:28.878083Z","iopub.execute_input":"2026-01-22T15:21:28.879112Z","iopub.status.idle":"2026-01-22T15:21:28.885760Z","shell.execute_reply.started":"2026-01-22T15:21:28.879068Z","shell.execute_reply":"2026-01-22T15:21:28.884647Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"overlap_id = np.array(np.where((A ==1)&(B==1)))\noverlap=len(overlap_id[0])\nprint('Overlap area = ',overlap,' (number of pixels)')","key":"UgpgqyKFAG"},{"type":"outputs","id":"1CG6Lz0CwJUS2wVvfS31n","children":[{"type":"output","jupyter_data":{"name":"stdout","text":"Overlap area =  11664  (number of pixels)\n","output_type":"stream"},"children":[],"key":"QEnB8PsTPQ"}],"key":"qY9rqVKXnJ"}],"key":"VMy8JU6LjL"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calcoliamo l’indice di Jaccard","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lqyw0rmV1u"}],"key":"Scz2F8XMqk"}],"key":"l8gzG9INjO"},{"type":"block","kind":"notebook-code","data":{"trusted":true,"execution":{"iopub.status.busy":"2026-01-22T15:21:33.382601Z","iopub.execute_input":"2026-01-22T15:21:33.382947Z","iopub.status.idle":"2026-01-22T15:21:33.390016Z","shell.execute_reply.started":"2026-01-22T15:21:33.382919Z","shell.execute_reply":"2026-01-22T15:21:33.389177Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"AB_mask_id = np.array(np.where((A ==1) | (B==1)))\nAB_mask_size=len(AB_mask_id[0])\nJaccard_index = overlap/AB_mask_size\nprint('Jaccard index = ',Jaccard_index,' (number of pixels)')","key":"jNsPXTbIEA"},{"type":"outputs","id":"ECM8CsN-8uEOZt1On0vXV","children":[{"type":"output","jupyter_data":{"name":"stdout","text":"Jaccard index =  0.5526914329037149  (number of pixels)\n","output_type":"stream"},"children":[],"key":"qLeTJHtNSb"}],"key":"vmtxoFX4Nr"}],"key":"vh1cRe4XP9"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calcoliamo l’indice di Jaccard attraverso la libreria sklearn","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CQNzkJu7F5"}],"key":"fCoGhkTnY4"}],"key":"IE0sYS8xvi"},{"type":"block","kind":"notebook-code","data":{"trusted":true,"execution":{"iopub.status.busy":"2026-01-22T15:21:37.130043Z","iopub.execute_input":"2026-01-22T15:21:37.130398Z","iopub.status.idle":"2026-01-22T15:21:37.163663Z","shell.execute_reply.started":"2026-01-22T15:21:37.130370Z","shell.execute_reply":"2026-01-22T15:21:37.162615Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"Jaccard_lib=jaccard_score(A,B,average=\"micro\")\nprint('Jaccard index (library) = ',Jaccard_lib,' (number of pixels)')","key":"gtlEO2yBlG"},{"type":"outputs","id":"YZfI4J4LrWQTPnDQbNMu_","children":[{"type":"output","jupyter_data":{"name":"stdout","text":"Jaccard index (library) =  0.5526914329037149  (number of pixels)\n","output_type":"stream"},"children":[],"key":"R3MAfVadMO"}],"key":"dCljkbItbb"}],"key":"hTxbQVMajt"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calcoliamo l’indice di Dice","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Mv8CkP6b37"}],"key":"y4qXJc9IV4"}],"key":"t7eFSpVRtb"},{"type":"block","kind":"notebook-code","data":{"trusted":true,"execution":{"iopub.status.busy":"2026-01-22T15:22:19.768520Z","iopub.execute_input":"2026-01-22T15:22:19.768852Z","iopub.status.idle":"2026-01-22T15:22:19.778529Z","shell.execute_reply.started":"2026-01-22T15:22:19.768825Z","shell.execute_reply":"2026-01-22T15:22:19.777242Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"A_mask_id = np.array(np.where(A ==1))\nA_mask_size=len(A_mask_id[0])\nB_mask_id = np.array(np.where(B ==1))\nB_mask_size=len(B_mask_id[0])\nDice_index=2*overlap/(A_mask_size+B_mask_size)\nprint('Dice index = ',Dice_index,' (number of pixels)')\nDice_lib1 = 2*Jaccard_lib / (1 + Jaccard_lib)\nDice_lib2 = 1-dice(A.flatten(),B.flatten())\nprint('Dice index (library) = ',Dice_lib1,Dice_lib2,' (number of pixels)')\n","key":"UIh7W1cJmW"},{"type":"outputs","id":"IExHwP8tQ02_hnNn-Ex95","children":[{"type":"output","jupyter_data":{"name":"stdout","text":"Dice index =  0.7119140625  (number of pixels)\nDice index (library) =  0.7119140625 0.7119140625  (number of pixels)\n","output_type":"stream"},"children":[],"key":"ztvKpCYf0e"}],"key":"ThyrzxWOAC"}],"key":"GfNE2DwCJj"}],"key":"EOcO8aREMx"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Capitolo 4: Validazione degli Algoritmi di Analisi dell’Immagine Biomedica","url":"/c14-imm-biom","group":"Capitolo4"}}},"domain":"http://localhost:3000"}